<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>期刊采访</title>
    <link rel="stylesheet" href="/styles/app.css">
</head>
<body>

<h2>📰 期刊采访</h2>

<h3>➕ 新增期刊采访清单</h3>
<form action="/periodical/visit/add" method="post">
    <p>期刊名称：<input type="text" name="title" required></p>
    <p>ISSN：<input type="text" name="issn" pattern="\d{8}" required></p>
    <p>出版社：<input type="text" name="publisher" required></p>
    <p>推荐人：<input type="text" name="recommender" required></p>
    <p>推荐日期：<input type="date" name="recommendDate" th:value="${today}" readonly required></p>
    <p>推荐理由：<input type="text" name="reason" required></p>
    <button type="submit">添加</button>
</form>

<hr>

<h3>📋 期刊采访清单</h3>
<div th:if="${#lists.isEmpty(visitList)}">
    <p>暂无采访推荐记录</p>
</div>

<table border="1" th:if="${!#lists.isEmpty(visitList)}">
    <tr>
        <th>采访编号</th>
        <th>期刊名称</th>
        <th>ISSN</th>
        <th>出版社</th>
        <th>推荐人</th>
        <th>推荐日期</th>
        <th>推荐理由</th>
        <th>操作</th>
    </tr>
    <tr th:each="record : ${visitList}">
        <td th:text="${record.visitId}"></td>
        <td th:text="${record.title}"></td>
        <td th:text="${record.issn}"></td>
        <td th:text="${record.publisher}"></td>
        <td th:text="${record.recommender}"></td>
        <td th:text="${record.recommendDate}"></td>
        <td th:text="${record.reason}"></td>
        <td>
            <a th:href="@{/periodical/order(title=${record.title},issn=${record.issn},publisher=${record.publisher})}">去订购</a>
        </td>
    </tr>
</table>

<p><a href="/periodical">返回期刊管理首页</a></p>

</body>
</html>
