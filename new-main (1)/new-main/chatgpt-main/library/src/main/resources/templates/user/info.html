<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>个人信息维护</title>
    <link rel="stylesheet" href="/styles/app.css">
</head>
<body>
<div class="page-layout">
    <div th:replace="fragments/sidebar :: userMenu"></div>
    <main class="page-content">
<h2>个人信息维护</h2>

<p th:if="${message}" th:text="${message}"></p>

<div th:if="${accountId == null}">
    <p>请先登录后再维护信息。</p>
    <a th:href="@{/user/login}">去登录</a>
</div>

<div th:if="${accountId != null}">
    <p>当前账号：<span th:text="${accountId}"></span>（<span th:text="${role}"></span>）</p>
    <form th:action="@{/user/info}" method="post">
        <label>
            姓名：
            <input type="text" name="name" th:value="${readerInfo != null ? readerInfo.name : ''}"
                   pattern="^[\u4e00-\u9fff]+$" title="姓名必须为汉字" required>
        </label>
        <br>
        <label>
            性别：
            <select name="gender" required>
                <option value="">请选择</option>
                <option value="男" th:selected="${readerInfo != null && readerInfo.gender == '男'}">男</option>
                <option value="女" th:selected="${readerInfo != null && readerInfo.gender == '女'}">女</option>
            </select>
        </label>
        <br>
        <label>
            手机号：
            <input type="text" name="mobile" th:value="${readerInfo != null ? readerInfo.mobile : ''}"
                   pattern="[0-9]{11}" maxlength="11" inputmode="numeric" title="手机号必须为11位数字" required>
        </label>
        <br>
        <label>
            密码验证：
            <input type="password" name="password" required>
        </label>
        <br>
        <button type="submit">保存信息</button>
    </form>
</div>

<a th:href="@{/user}">返回用户管理目录</a>
    </main>
</div>
</body>
</html>
